<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript" src="http://yandex.st/jquery/1.9.1/jquery.js"></script>
<script type="text/javascript">

function getURLParameter(name) {
  return decodeURIComponent(
    (location.search.match(RegExp("[?|&]"+name+'=(.+?)(&|$)'))||[,null])[1]
  );
}

  // Let us open a web socket
  var ws = new WebSocket("ws://localhost:8080/games/" + getURLParameter("id"));

  ws.onopen = function() {
    // Web Socket is connected, send data using send()
    console.log("Message is sent...");
  };

  ws.onmessage = function (evt) 
  { 
    var received_msg = evt.data;
    console.log(received_msg);
  };

  ws.onclose = function()
  { 
    // websocket is closed.
    console.log("Connection is closed..."); 
  };

  $(function(){
    $("td").click(function(el) {
      console.log(el);
      var td = $(el.currentTarget);
      var x = td.parent().children().index(td);
      var y = $("table tr").index(td.parent());
      ws.send('{"x":' + (x + 1) + "," + '"y":' + (y + 1) + "}");
    });
  });
</script>
</head>
<body>
<table border="1" width="200" height="200">
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table>
</body>
</html>
